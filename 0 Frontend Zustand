useStore.subscribe(
  (state) => state.userId,
  async (userId) => {
    if (userId) {
      try {
        const response = await fetch(`/api/users/${userId}`);
        const data = await response.json();
        useStore.setState({ userData: data });
      } catch (error) {
        console.error('Failed to fetch user data:', error);
      }
    } else {
      useStore.setState({ userData: null });
    }
  }
);
