// VisibilityContext.tsx
import React, { createContext, useContext, useState, ReactNode } from 'react';

interface VisibilityContextType {
  isVisible: boolean;
  marginTop: number;
  toggleVisibility: () => void;
  adjustMarginTop: (newMargin: number) => void;
}

const VisibilityContext = createContext<VisibilityContextType | undefined>(undefined);

export const VisibilityProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [isVisible, setIsVisible] = useState<boolean>(true);
  const [marginTop, setMarginTop] = useState<number>(0); // Type for marginTop as number

  const toggleVisibility = () => setIsVisible((prev) => !prev);
  const adjustMarginTop = (newMargin: number) => setMarginTop(newMargin);

  return (
    <VisibilityContext.Provider value={{ isVisible, toggleVisibility, marginTop, adjustMarginTop }}>
      {children}
    </VisibilityContext.Provider>
  );
};

export const useVisibility = (): VisibilityContextType => {
  const context = useContext(VisibilityContext);
  if (!context) {
    throw new Error('useVisibility must be used within a VisibilityProvider');
  }
  return context;
};

// App.tsx
import React from 'react';
import { VisibilityProvider } from './VisibilityContext';
import ParentComponent from './ParentComponent';

const App: React.FC = () => {
  return (
    <VisibilityProvider>
      <ParentComponent />
    </VisibilityProvider>
  );
};

export default App;


// ParentComponent.tsx
import React from 'react';
import { useVisibility } from './VisibilityContext';
import ChildComponent from './ChildComponent';

const ParentComponent: React.FC = () => {
  const { isVisible, marginTop } = useVisibility();

  return (
    <div>
      <h1>Parent Component</h1>
      {isVisible && (
        <div style={{ marginTop: `${marginTop}px` }}>
          This component is visible with margin-top: {marginTop}px
        </div>
      )}
      {isVisible && (
        <div style={{ marginTop: `${marginTop}px` }}>
          Another component to hide, margin-top: {marginTop}px
        </div>
      )}
      <ChildComponent />
    </div>
  );
};

export default ParentComponent;

// ChildComponent.tsx
import React, { useState } from 'react';
import { useVisibility } from './VisibilityContext';

const ChildComponent: React.FC = () => {
  const { toggleVisibility, adjustMarginTop } = useVisibility();
  const [marginValue, setMarginValue] = useState<number>(0); // Type marginValue as number

  const handleMarginChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = Number(e.target.value);
    setMarginValue(value);
    adjustMarginTop(value);
  };

  return (
    <div>
      <button onClick={toggleVisibility}>
        Toggle Visibility of Parent Components
      </button>

      <div>
        <label>
          Adjust Margin-Top:
          <input
            type="number"
            value={marginValue}
            onChange={handleMarginChange}
            placeholder="Enter margin-top value"
          />
        </label>
      </div>
    </div>
  );
};

export default ChildComponent;
